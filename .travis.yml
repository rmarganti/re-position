language: node_js

node_js:
    - '11.10.1'

cache: yarn

script:
    - yarn test
    - yarn build

deploy:
    - provider: npm
      skip-cleanup: true
      email: $NPM_EMAIL
      api_key: $NPM_TOKEN
      on:
          branch: master
          tags: true
          repo: rmarganti/re-position

    - provider: pages
      skip-cleanup: true
      github-token: $GH_TOKEN
      keep-history: true
      local-dir: .docz/dist
      on:
          branch: master
          tags: true
          repo: rmarganti/re-position
